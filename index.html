<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>GRASP: General Relativistic Atomic Structure Package</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GRASP
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Types&#160;List</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">General Relativistic Atomic Structure Package </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>[![][manual-badge]][manual-pdf]</p>
<p>The General Relativistic Atomic Structure Package (GRASP) is a set of Fortran 90 programs for performing fully-relativistic electron structure calculations of atoms.</p>
<h2>Installation</h2>
<blockquote class="doxtable">
<p><b>Please note:</b> The installation instructions here are for the <em>development version</em> on the <code>master</code> branch.</p>
<p>To install the <em>latest published release</em> (2018-12-03), go to the <a href="https://github.com/compas/grasp/releases/tag/2018-12-03">"Releases" page</a>, download the tarball from there and refer to the instructions in the README in the tarball. </p>
</blockquote>
<p>To compile and install GRASP, first clone this Git repository:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;git clone https://github.com/compas/grasp.git</div></div><!-- fragment --><p>There are two ways to build GRASP: either via <a href="https://cmake.org/">CMake</a> or via the <code>Makefile</code>s in the source tree. Either works and you end up with the GRASP binaries in the <code>bin/</code> directory.</p>
<p>CMake is the recommended way to build GRASP. The <code>Makefile</code>-based workflow is still there to make smoother to transition from <code>Makefile</code>s to a modern build system.</p>
<h3>CMake-based build</h3>
<p>The first step with CMake is to create a separate out-of-source build directory. The <code>configure.sh</code> script can do that for you:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd grasp/ &amp;&amp; ./configure.sh</div></div><!-- fragment --><p>This will create a <code>build/</code> directory with the default <em>Release</em> build configuration. However, <code>configure.sh</code> is just a simple wrapper around a <code>cmake</code> call and if you need more control over the build, you can always invoke <code>cmake</code> yourself (see <a href="https://cmake.org/documentation/">CMake documentation</a> for more information).</p>
<p>To then compile GRASP, you need to go into the out-of-source build directory and simply call <code>make</code>:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd build/ &amp;&amp; make install</div></div><!-- fragment --><p>Remarks:</p>
<ul>
<li><p class="startli">Running <code>make install</code> instructs CMake to actually <em>install</em> the resulting binaries into the conventional <code>bin/</code> directory at the root of the repository.</p>
<p class="startli">When you run just <code>make</code>, the resulting binaries will end up under the <code>build/</code> directory (specifically in <code>build/bin/</code>). This is useful when developing and debugging, as it allows you to compile many versions of the binaries from the same source tree with different compilation options (e.g. build with debug symbols enabled) by using several out of source build directories.</p>
</li>
<li>With CMake, GRASP also supports parallel builds, which can be enabled by passing the <code>-j</code> option to <code>make</code> (e.g. <code>make -j4 install</code> to build with four processes).</li>
<li>The CMake-based build allows running the (non-comprehensive) test suite by calling <code>ctest</code> in the <code>build/</code> directory. The configuration and source files for the tests are under <code>test/</code>/</li>
</ul>
<h3><code>Makefile</code>-based build</h3>
<p>The legacy <code>Makefile</code>-based build can be performed by simply calling the <code>make</code> in the top level directory:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;make</div></div><!-- fragment --><p>In this case, the compilation of each of the libraries and programs happens in their respective directory under <code>src/</code> and the build artifacts are stored in the source tree. The resulting binaries and libraries will directly get installed under the <code>bin/</code> and <code>lib/</code> directories.</p>
<p>To build a specific library or binary you can pass the path to the source directory as the Make target:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# build libmod</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;make src/lib/libmod</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;# build the rci_mpi binary</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;make src/appl/rci90_mpi</div></div><!-- fragment --><p>Note that any necessary library dependencies will also get built automatically.</p>
<p><b>WARNING:</b> the <code>Makefile</code>s do not know about the dependencies between the source files, so parallel builds (i.e. calling <code>make</code> with the <code>-j</code> option) does not work.</p>
<h4>Customizing the build</h4>
<p>By default the <code>Makefile</code> is designed to use <code>gfortran</code>. The variables affecting GRASP builds are defined and documented at the beginning of the <code>Makefile</code>.</p>
<p>For the user it should never be necessary to modify the <code>Makefile</code> itself. Rather, a <code>Make.user</code> file can be create next to the main <code>Makefile</code> where the build variables can be overridden. E.g. to use the Intel Fortran compiler instead, you may want to create the following <code>Make.user</code> file:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;export FC = ifort</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;export FC_FLAGS = -O2 -save</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;export FC_LD = -mkl=sequential</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;export FC_MPI = mpiifort</div></div><!-- fragment --><p>As another example, to set up a linker search path for the BLAS or LAPACK libraries, you can set up <code>Make.user</code> as follows:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;export FC_LD = -L /path/to/blas</div></div><!-- fragment --><h2>About GRASP</h2>
<p>This version of GRASP is a major revision of the previous GRASP2K package by [P. Jonsson, G. Gaigalas, J. Bieron, C. Froese Fischer, and I.P. Grant Computer Physics Communication, 184, 2197 - 2203 (2013)][grasp2k-2013] written in FORTRAN 77 style with COMMON and using Cray pointers for memory management. The present version is a FORTRAN95 translation using standard FORTRAN for memory management. In addition, COMMONS have been replaced with MODULES, with some COMMONS merged. Some algorithms have been changed to improve performance for large cases and efficiently.</p>
<p>The previous package, was an extension and modification of GRASP92 by Farid Parpia, Charlotte Froese Fischer, and Ian Grant. Computer Physics Communication, 94, 249-271 (1996)</p>
<p>Development of this package was performed largely by:</p>
<ul>
<li>Charlotte Froese Fischer email: <a href="#" onclick="location.href='mai'+'lto:'+'cff'+'@c'+'s.u'+'bc'+'.ca'; return false;">cff@c<span style="display: none;">.nosp@m.</span>s.ub<span style="display: none;">.nosp@m.</span>c.ca</a></li>
<li>Gediminas Gaigalas email: <a href="#" onclick="location.href='mai'+'lto:'+'Ged'+'im'+'ina'+'s.'+'Gai'+'ga'+'las'+'@t'+'fai'+'.v'+'u.l'+'t'; return false;">Gedim<span style="display: none;">.nosp@m.</span>inas<span style="display: none;">.nosp@m.</span>.Gaig<span style="display: none;">.nosp@m.</span>alas<span style="display: none;">.nosp@m.</span>@tfai<span style="display: none;">.nosp@m.</span>.vu.<span style="display: none;">.nosp@m.</span>lt</a></li>
<li>Per Jönsson email: <a href="#" onclick="location.href='mai'+'lto:'+'per'+'.j'+'ons'+'so'+'n@m'+'au'+'.se'; return false;">per.j<span style="display: none;">.nosp@m.</span>onss<span style="display: none;">.nosp@m.</span>on@ma<span style="display: none;">.nosp@m.</span>u.se</a></li>
<li>Jacek Bieron email: <a href="#" onclick="location.href='mai'+'lto:'+'jac'+'ek'+'.bi'+'er'+'on@'+'uj'+'.ed'+'u.'+'pl'; return false;">jacek<span style="display: none;">.nosp@m.</span>.bie<span style="display: none;">.nosp@m.</span>ron@u<span style="display: none;">.nosp@m.</span>j.ed<span style="display: none;">.nosp@m.</span>u.pl</a></li>
</ul>
<p>Please contact one of these authors if you have questions</p>
<p>Supporters include:</p>
<ul>
<li>Jörgen Ekman email: <a href="#" onclick="location.href='mai'+'lto:'+'jor'+'ge'+'n.e'+'km'+'an@'+'ma'+'h.s'+'e'; return false;">jorge<span style="display: none;">.nosp@m.</span>n.ek<span style="display: none;">.nosp@m.</span>man@m<span style="display: none;">.nosp@m.</span>ah.s<span style="display: none;">.nosp@m.</span>e</a></li>
<li>Ian Grant email: <a href="#" onclick="location.href='mai'+'lto:'+'ian'+'gr'+'ant'+'15'+'@bt'+'in'+'ter'+'ne'+'t.c'+'om'; return false;">iangr<span style="display: none;">.nosp@m.</span>ant1<span style="display: none;">.nosp@m.</span>5@bti<span style="display: none;">.nosp@m.</span>nter<span style="display: none;">.nosp@m.</span>net.c<span style="display: none;">.nosp@m.</span>om</a></li>
</ul>
<p>Computer Physics Communications publication on this version of GRASP:</p>
<blockquote class="doxtable">
<p>C. Froese Fischer, G. Gaigalas, P. Jönsson, J. Bieroń, "GRASP2018 - a Fortran 95 version of the General Relativistic Atomic Structure Package", Computer Physics Communications, 2018, <a href="https://doi.org/10.1016/j.cpc.2018.10.032">https://doi.org/10.1016/j.cpc.2018.10.032</a> </p>
</blockquote>
<h2>Structure of the Package</h2>
<p>The package has the structure shown below where executables, after successful compilation, reside in the <code>bin</code> directory. Compiled libraries are in the <code>lib</code> directory. Scripts for example runs and case studies are in folders under <code>grasptest</code>. Source code is in the <code>src</code> directory and divided into applications in the <code>appl</code> directory, libraries in the <code>lib</code> directory and tools in the <code>tool</code> directory.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;|-bin</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;|-grasptest</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;|---case1</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;|-----script</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;|---case1_mpi</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;|-----script</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;|-----tmp_mpi</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;|---case2</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;|-----script</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;|---case2_mpi</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;|-----script</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;|-----tmp_mpi</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;|---case3</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;|-----script</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;|---example1</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;|-----script</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;|---example2</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;|-----script</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;|---example3</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;|-----script</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;|---example4</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;|-----script</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;|-------tmp_mpi</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;|---example5</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;|-----script</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;|-lib</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;|-src</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;|---appl</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;|-----HF</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;|-----jj2lsj90</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;|-----jjgen90</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;|-----rangular90</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;|-----rangular90_mpi</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;|-----rbiotransform90</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;|-----rbiotransform90_mpi</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;|-----rci90</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;|-----rci90_mpi</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;|-----rcsfgenerate90</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;|-----rcsfinteract90</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;|-----rcsfzerofirst90</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;|-----rhfs90</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;|-----rmcdhf90</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;|-----rmcdhf90_mpi</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;|-----rnucleus90</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;|-----rtransition90</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;|-----rtransition90_mpi</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;|-----rwfnestimate90</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;|-----sms90</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;|---lib</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;|-----lib9290</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;|-----libdvd90</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;|-----libmcp90</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;|-----libmod</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;|-----librang90</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;|-----mpi90</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;|---tool</div></div><!-- fragment --><h2>Program Guide and Compilation</h2>
<p>The software is distributed with a practical guide to GRASP2018 in PDF-format. The guide, which is under Creative Commons Attribution 4.0 International (CC BY 4.0) license, contains full information on how to compile and install the package.</p>
<h2>Acknowledgements</h2>
<p>This work was supported by the Chemical Sciences, Geosciences and Biosciences Division, Office of Basic Energy Sciences, Office of Science, U.S. Department of Energy who made the Pacific Sierra translator available and the National Institute of Standards and Technology. Computer resources were made available by Compute Canada. CFF had research support from the Canadian NSERC Discovery Grant 2017-03851. JB acknowledges financial support of the European Regional Development Fund in the framework of the Polish Innovation Economy Operational Program (Contract No. POIG.02.01.00-12-023/08).</p>
<h2>License</h2>
<p>The code in this repository is distributed under the <a class="el" href="md_LICENSE.html">MIT license</a>. The associated manual "A practical guide to GRASP2018" is distributed under <a href="https://creativecommons.org/licenses/by/4.0/legalcode">the Creative Commons Attribution 4.0 International (CC BY 4.0) license</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
